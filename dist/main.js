(()=>{"use strict";function t(t){const e=document.getElementById("city-name"),a=document.getElementById("day-weather"),i=document.getElementById("day-temp"),s=document.getElementById("feels-like"),c=document.getElementById("humidity"),r=document.getElementById("visibility"),l=document.getElementById("wind-speed");document.getElementById("todays-date").innerHTML=function(){const t=new Date,e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()],n=t.getDate();let a="";const i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],s=String(t.getFullYear()),c=s[2]+s[3],r=t.getHours();let l=String(t.getMinutes());return a=1==String(n).slice(-1)?"st":2==String(n).slice(-1)?"nd":3==String(n).slice(-1)?"rd":"th",l.length<2&&(l="0"+l),`${e+", "+n+a+" "+i+" '"+c}<br />${r+":"+l}`}(),l.textContent=t.current.wind_speed,r.textContent=t.current.visibility,c.textContent=t.current.humidity,s.textContent=t.current.feels_like,i.textContent=t.current.temp,a.textContent=t.current.weather[0].description,e.textContent=n.getLastSearch()}class e{static units="imperial";static getUnits(){return e.units}static setUnits(t){e.units=t}}class n{static lastSearch="New York";static getLastSearch(){return n.lastSearch}static setLastSearch(t){n.lastSearch=t}}async function a(t,e,n="imperial"){const a=await fetch(`https://api.openweathermap.org/data/3.0/onecall?units=${n}&lat=${t}&lon=${e}&APPID=a4b3f65b2dbd15c2b33875e013b2dc1b`,{mode:"cors"}),i=await a.json();return console.log(i),i}async function i(){let i=document.querySelector("input").value,s="",r="";var l;""===i?(i=void 0,i=await c()):((l=i).replace(/(^\w{1})|(\s+\w{1})/g,(t=>t.toUpperCase())),i=l,n.setLastSearch(i),i=await c(i)),s=i[0].lat,r=i[0].lon,t(await a(s,r,e.getUnits()))}async function s(n,i){const s=await c(n),r=s[0].lat,l=s[0].lon;t(await a(r,l,i)),function(t){const e=document.getElementsByClassName("units"),n=document.getElementsByClassName("small_units"),a=document.getElementById("speed-units");if("imperial"===t){for(let t=0;t<e.length;t++)e[t].innerHTML="&#8457";for(let t=0;t<n.length;t++)n[t].innerHTML="&#8457";a.textContent="mph"}else if("metric"===t){for(let t=0;t<e.length;t++)e[t].innerHTML="&#8451;";for(let t=0;t<n.length;t++)n[t].innerHTML="&#8451;";a.textContent="m/s"}}(e.getUnits())}async function c(t=n.getLastSearch()){const e=(await fetch(`http://api.openweathermap.org/geo/1.0/direct?q=${t}&limit=5&appid=a4b3f65b2dbd15c2b33875e013b2dc1b`,{mode:"cors"})).json();return console.log(e),e}window.onload=i(),(()=>{const t=document.querySelector("#submit"),a=document.getElementById("display_F"),c=document.getElementById("display_C"),r=document.querySelector("form");a.addEventListener("click",(()=>{a.style.display="none",c.style.display="flex",e.setUnits("metric"),s(n.getLastSearch(),e.getUnits())})),c.addEventListener("click",(()=>{c.style.display="none",a.style.display="flex",e.setUnits("imperial"),s(n.getLastSearch(),e.getUnits())})),r.addEventListener("keydown",(function(t){"Enter"===t.code&&(t.preventDefault(),i())})),t.addEventListener("click",(()=>{i()}))})()})();