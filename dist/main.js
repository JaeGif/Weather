(()=>{"use strict";function t(t){const e=document.getElementById("city-name"),n=document.getElementById("day-weather"),a=document.getElementById("day-temp"),i=document.getElementById("feels-like"),o=document.getElementById("humidity"),l=document.getElementById("visibility"),m=document.getElementById("wind-speed");document.getElementById("todays-date").innerHTML=function(){const t=new Date,e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()],n=t.getDate();let d="";const a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],i=String(t.getFullYear()),o=i[2]+i[3],l=t.getHours();let m=String(t.getMinutes());return d=1==String(n).slice(-1)?"st":2==String(n).slice(-1)?"nd":3==String(n).slice(-1)?"rd":"th",m.length<2&&(m="0"+m),`${e+", "+n+d+" "+a+" '"+o}<br />${l+":"+m}`}(),m.textContent=t.current.wind_speed,l.textContent=t.current.visibility,o.textContent=t.current.humidity,i.textContent=t.current.feels_like,a.textContent=t.current.temp,n.textContent=t.current.weather[0].description,e.textContent=d.getLastSearch()}function e(t){let e=0,n=[],d=(new Date).getDay();for(let t=1;t<8;t++)d<=6?e=d:d>6&&(e=d-7),d++,n.push(e);const a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=document.getElementById("n-1"),o=document.getElementById("n-2"),l=document.getElementById("n-3"),m=document.getElementById("n-4"),c=document.getElementById("n-5"),s=document.getElementById("n-6"),r=document.getElementById("n-7");i.textContent=a[n[1]],o.textContent=a[n[2]],l.textContent=a[n[3]],m.textContent=a[n[4]],c.textContent=a[n[5]],s.textContent=a[n[6]],r.textContent=a[n[0]],document.getElementById("n-1-high").textContent=t.daily[1].temp.max,document.getElementById("n-1-low").textContent=t.daily[1].temp.min,document.getElementById("n-2-high").textContent=t.daily[2].temp.max,document.getElementById("n-2-low").textContent=t.daily[2].temp.min,document.getElementById("n-3-high").textContent=t.daily[3].temp.max,document.getElementById("n-3-low").textContent=t.daily[3].temp.min,document.getElementById("n-4-high").textContent=t.daily[4].temp.max,document.getElementById("n-4-low").textContent=t.daily[4].temp.min,document.getElementById("n-5-high").textContent=t.daily[5].temp.max,document.getElementById("n-5-low").textContent=t.daily[5].temp.min,document.getElementById("n-6-high").textContent=t.daily[6].temp.max,document.getElementById("n-6-low").textContent=t.daily[6].temp.min,document.getElementById("n-7-high").textContent=t.daily[7].temp.max,document.getElementById("n-7-low").textContent=t.daily[7].temp.min}class n{static units="imperial";static getUnits(){return n.units}static setUnits(t){n.units=t}}class d{static lastSearch="New York";static getLastSearch(){return d.lastSearch}static setLastSearch(t){d.lastSearch=t}}async function a(t,e,n="imperial"){const d=await fetch(`https://api.openweathermap.org/data/3.0/onecall?units=${n}&lat=${t}&lon=${e}&APPID=a4b3f65b2dbd15c2b33875e013b2dc1b`,{mode:"cors"}),a=await d.json();return console.log(a),a}async function i(){let i=document.querySelector("input").value,o="",m="";var c;""===i?(i=void 0,i=await l()):((c=i).replace(/(^\w{1})|(\s+\w{1})/g,(t=>t.toUpperCase())),i=c,d.setLastSearch(i),i=await l(i)),o=i[0].lat,m=i[0].lon;const s=await a(o,m,n.getUnits());t(s),e(s)}async function o(d,i){const o=await l(d),m=o[0].lat,c=o[0].lon,s=await a(m,c,i);t(s),e(s),function(t){const e=document.getElementsByClassName("units"),n=document.getElementsByClassName("small_units"),d=document.getElementById("speed-units");if("imperial"===t){for(let t=0;t<e.length;t++)e[t].innerHTML="&#8457";for(let t=0;t<n.length;t++)n[t].innerHTML="&#8457";d.textContent="mph"}else if("metric"===t){for(let t=0;t<e.length;t++)e[t].innerHTML="&#8451;";for(let t=0;t<n.length;t++)n[t].innerHTML="&#8451;";d.textContent="m/s"}}(n.getUnits())}async function l(t=d.getLastSearch()){return(await fetch(`http://api.openweathermap.org/geo/1.0/direct?q=${t}&limit=5&appid=a4b3f65b2dbd15c2b33875e013b2dc1b`,{mode:"cors"})).json()}window.onload=i(),(()=>{const t=document.querySelector("#submit"),e=document.getElementById("display_F"),a=document.getElementById("display_C"),l=document.querySelector("form");e.addEventListener("click",(()=>{e.style.display="none",a.style.display="flex",n.setUnits("metric"),o(d.getLastSearch(),n.getUnits())})),a.addEventListener("click",(()=>{a.style.display="none",e.style.display="flex",n.setUnits("imperial"),o(d.getLastSearch(),n.getUnits())})),l.addEventListener("keydown",(function(t){"Enter"===t.code&&(t.preventDefault(),i())})),t.addEventListener("click",(()=>{i()}))})()})();