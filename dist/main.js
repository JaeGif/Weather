(()=>{"use strict";function t(t){const e=document.getElementById("city-name"),n=document.getElementById("day-weather"),s=document.getElementById("day-temp"),a=document.getElementById("feels-like"),l=document.getElementById("humidity"),c=document.getElementById("visibility"),m=document.getElementById("wind-speed"),i=document.getElementById("todays-date");document.querySelector(".current_icon").src=d(t.current.weather[0].id),i.innerHTML=function(t){const e=60*(new Date).getTimezoneOffset(),n=1e3*(t.current.dt+e+t.timezone_offset),d=new Date(n),s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][d.getDay()],o=d.getDate();let a="";const l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][d.getMonth()],c=String(d.getFullYear()),m=c[2]+c[3],i=d.getHours();let r=String(d.getMinutes());return a=1==String(o).slice(-1)?"st":2==String(o).slice(-1)?"nd":3==String(o).slice(-1)?"rd":"th",r.length<2&&(r="0"+r),`${s+", "+o+a+" "+l+" '"+m}<br />${i+":"+r}`}(t),m.textContent=t.current.wind_speed,c.textContent=t.current.visibility,l.textContent=t.current.humidity,a.textContent=t.current.feels_like,s.textContent=t.current.temp,n.textContent=t.current.weather[0].description,e.textContent=o.getLastSearch()}function e(t){const e=60*(new Date).getTimezoneOffset(),n=1e3*(t.current.dt+e+t.timezone_offset);let s=0,o=[],a=new Date(n).getDay();for(let t=1;t<8;t++)a<=6?s=a:a>6&&(s=a-7),a++,o.push(s);const l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=document.getElementById("n-1"),m=document.getElementById("n-2"),i=document.getElementById("n-3"),r=document.getElementById("n-4"),y=document.getElementById("n-5"),g=document.getElementById("n-6"),u=document.getElementById("n-7");c.textContent=l[o[1]],m.textContent=l[o[2]],i.textContent=l[o[3]],r.textContent=l[o[4]],y.textContent=l[o[5]],g.textContent=l[o[6]],u.textContent=l[o[0]],document.getElementById("n-1-high").textContent=t.daily[1].temp.max,document.getElementById("n-1-low").textContent=t.daily[1].temp.min,document.getElementById("n-2-high").textContent=t.daily[2].temp.max,document.getElementById("n-2-low").textContent=t.daily[2].temp.min,document.getElementById("n-3-high").textContent=t.daily[3].temp.max,document.getElementById("n-3-low").textContent=t.daily[3].temp.min,document.getElementById("n-4-high").textContent=t.daily[4].temp.max,document.getElementById("n-4-low").textContent=t.daily[4].temp.min,document.getElementById("n-5-high").textContent=t.daily[5].temp.max,document.getElementById("n-5-low").textContent=t.daily[5].temp.min,document.getElementById("n-6-high").textContent=t.daily[6].temp.max,document.getElementById("n-6-low").textContent=t.daily[6].temp.min,document.getElementById("n-7-high").textContent=t.daily[7].temp.max,document.getElementById("n-7-low").textContent=t.daily[7].temp.min,document.getElementById("n-1-svg").src=d(t.daily[1].weather[0].id),document.getElementById("n-2-svg").src=d(t.daily[2].weather[0].id),document.getElementById("n-3-svg").src=d(t.daily[3].weather[0].id),document.getElementById("n-4-svg").src=d(t.daily[4].weather[0].id),document.getElementById("n-5-svg").src=d(t.daily[5].weather[0].id),document.getElementById("n-6-svg").src=d(t.daily[6].weather[0].id),document.getElementById("n-7-svg").src=d(t.daily[7].weather[0].id)}function n(t){const e=60*(new Date).getTimezoneOffset(),n=1e3*(t.current.dt+e+t.timezone_offset);let s=0,o=[],a=new Date(n).getHours()+1;for(let t=0;t<8;t++)a<24?s=a:a>=24&&(s=a-24),a++,o.push(s);document.getElementById("h-1").textContent=o[0]+":00",document.getElementById("h-2").textContent=o[1]+":00",document.getElementById("h-3").textContent=o[2]+":00",document.getElementById("h-4").textContent=o[3]+":00",document.getElementById("h-5").textContent=o[4]+":00",document.getElementById("h-6").textContent=o[5]+":00",document.getElementById("h-7").textContent=o[6]+":00",document.getElementById("h-8").textContent=o[7]+":00";const l=document.getElementById("h-1-data"),c=document.getElementById("h-2-data"),m=document.getElementById("h-3-data"),i=document.getElementById("h-4-data"),r=document.getElementById("h-5-data"),y=document.getElementById("h-6-data"),g=document.getElementById("h-7-data"),u=document.getElementById("h-8-data");l.textContent=t.hourly[1].temp,c.textContent=t.hourly[2].temp,m.textContent=t.hourly[3].temp,i.textContent=t.hourly[4].temp,r.textContent=t.hourly[5].temp,y.textContent=t.hourly[6].temp,g.textContent=t.hourly[7].temp,u.textContent=t.hourly[8].temp,document.getElementById("h-1-svg").src=d(t.hourly[1].weather[0].id),document.getElementById("h-2-svg").src=d(t.hourly[2].weather[0].id),document.getElementById("h-3-svg").src=d(t.hourly[3].weather[0].id),document.getElementById("h-4-svg").src=d(t.hourly[4].weather[0].id),document.getElementById("h-5-svg").src=d(t.hourly[5].weather[0].id),document.getElementById("h-6-svg").src=d(t.hourly[6].weather[0].id),document.getElementById("h-7-svg").src=d(t.hourly[7].weather[0].id),document.getElementById("h-8-svg").src=d(t.hourly[8].weather[0].id)}function d(t){let e="";switch(String(t)[0]){case"2":e="./assets/svg/severe-thunderstorm.svg";case"3":e="./assets/svg/drizzle.svg";case"5":e="./assets/svg/rain-1.svg";case"6":e="612"===String(t)||"613"===String(t)||"615"===String(t)||"616"===String(t)?"./assets/svg/rain-and-snow.svg":"./assets/svg/snow.svg";case"7":e="701"===String(t)||"711"===String(t)||"721"===String(t)||"741"===String(t)||"751"===String(t)||"761"===String(t)||"731"===String(t)?"./assets/svg/mist.svg":"./assets/svg/tornado-2.svg";case"8":e="800"===String(t)?"./assets/svg/sun-horizon-1.svg":"./assets/svg/mostly-cloudy-2.svg"}return e}class s{static units="imperial";static getUnits(){return s.units}static setUnits(t){s.units=t}}class o{static lastSearch="New York";static getLastSearch(){return o.lastSearch}static setLastSearch(t){o.lastSearch=t}}async function a(t,e,n="imperial"){const d=await fetch(`https://api.openweathermap.org/data/3.0/onecall?units=${n}&lat=${t}&lon=${e}&APPID=a4b3f65b2dbd15c2b33875e013b2dc1b`,{mode:"cors"});return await d.json()}async function l(){let d=document.querySelector("input").value;const l=document.getElementById("error-block");let c="",i="";""===d?(d=void 0,d=await m()):(d=d.replace(/(^\w{1})|(\s+\w{1})/g,(t=>t.toUpperCase())),o.setLastSearch(d),d=await m(d));try{c=d[0].lat,i=d[0].lon,l.style.display="none"}catch(t){l.style.display="block"}const r=await a(c,i,s.getUnits());t(r),e(r),n(r)}async function c(d,o){const l=await m(d),c=l[0].lat,i=l[0].lon,r=await a(c,i,o);t(r),e(r),n(r),function(t){const e=document.getElementsByClassName("units"),n=document.getElementsByClassName("small_units"),d=document.getElementById("speed-units");if("imperial"===t){for(let t=0;t<e.length;t++)e[t].innerHTML="&#8457";for(let t=0;t<n.length;t++)n[t].innerHTML="&#8457";d.textContent="mph"}else if("metric"===t){for(let t=0;t<e.length;t++)e[t].innerHTML="&#8451;";for(let t=0;t<n.length;t++)n[t].innerHTML="&#8451;";d.textContent="m/s"}}(s.getUnits())}async function m(t=o.getLastSearch()){return(await fetch(`http://api.openweathermap.org/geo/1.0/direct?q=${t}&limit=5&appid=a4b3f65b2dbd15c2b33875e013b2dc1b`,{mode:"cors"})).json()}window.onload=l(),(()=>{const t=document.getElementById("submit"),e=document.getElementById("display_F"),n=document.getElementById("display_C"),d=document.querySelector("form"),a=document.getElementById("daily"),m=document.getElementById("hourly"),i=document.getElementById("seven-day-forecast-container"),r=document.getElementById("hourly-forecast-container");a.addEventListener("click",(()=>{a.classList.remove("not-selected"),m.classList.remove("selected"),m.classList.add("not-selected"),a.classList.contains("selected")||a.classList.add("selected"),i.style.display="grid",r.style.display="none"})),m.addEventListener("click",(()=>{m.classList.remove("not-selected"),a.classList.remove("selected"),a.classList.add("not-selected"),m.classList.contains("selected")||m.classList.add("selected"),i.style.display="none",r.style.display="grid"})),e.addEventListener("click",(()=>{e.style.display="none",n.style.display="flex",s.setUnits("metric"),c(o.getLastSearch(),s.getUnits())})),n.addEventListener("click",(()=>{n.style.display="none",e.style.display="flex",s.setUnits("imperial"),c(o.getLastSearch(),s.getUnits())})),d.addEventListener("keydown",(function(t){"Enter"===t.code&&(t.preventDefault(),l())})),t.addEventListener("click",(()=>{l()}))})()})();